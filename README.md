# microwave_lg-2044J_atmega8
This is the firmware to custom microvawe controller for LG-2044J oven. It replicates the original functionality of the microvawe oven, adding some extra enchancments. 

/*
 * ПОВНА ПРОШИВКА МІКРОХВИЛЬОВКИ (v_pre_final_1.8.1_optim)
 * Модель: LG MS-2044J (на базі ATmega8, 16МГц)
 *
 * --- ОПИС ФУНКЦІОНАЛУ v1.8.1 ---
 *
 * 1.  Керування: ATmega8 (16МГц)
 * 2.  Клавіатура: 12-кнопкова аналогова (ADC).
 *
 * 3.  Логіка Звуку (v1.7.0):
 * - "Розумний Біп": Короткий сигнал (300мс) лунає ТІЛЬКИ "на відпускання"
 * активної кнопки (неактивні кнопки - беззвучні).
 * - Довгий Біп: Сигнал (800мс) для завершення, T-3, та нагадувань T+30с.
 * - Сигнал Перевертання: Серія з 3-х коротких біпів (300мс), триває 5 сек
 * або до відкриття дверцят.
 * - Сигнал Збереження Часу: Швидка серія 50мс біпів протягом 0.8с при
 * збереженні годинника.
 * - Утримання кнопок: Беззвучне для плавної зміни значень.
 *
 * 4.  Дисплей та Інтерфейс (v1.7.0):
 * - 4-розрядний 7-сегментний (Active High).
 * - Оверлей "door": При відкритті дверцят з IDLE, "door" показується 2 сек,
 * не скидаючи поточний стан (напр., введення часу).
 * - Чергування на Паузі: В режимах PAUSED (з автопрограмою) або
 * FLIP_PAUSE, дисплей чергує назву програми ("AC-1", "dEF-2") та
 * залишок часу кожну 1 секунду.
 * - Чергування на Паузі (Двері): Якщо двері відкриті на паузі, чергується
 * "door" та залишок часу кожну 1 секунду.
 *
 * 5.  Безпека Магнетрона (v1.7.0):
 * - Запобіжник PWM: Гарантований мінімальний час роботи (5 сек) та
 * мінімальний час відпочинку (2 сек) у циклах PWM.
 * - Запобіжник "< 10 сек": Магнетрон НЕ вмикається (або вимикається),
 * якщо час готування (або відновлення з паузи) менше 10 секунд.
 *
 * 6.  Логіка Авторозморозки (v1.7.0):
 * - На основі інженерних таблиць (flip_schedule_logic.md).
 * - Застосовано до "Авторозморозки" (dEF-1, 2, 3) та "Швидкої" (dEF-1, 500г).
 * - Автоматичний розрахунок до 5 точок перевертання залежно від ваги.
 * - Новий стан очікування STATE_FLIP_PAUSE.
 *
 * 7.  Керування живленням (PWM та ZVS):
 * - 5 рівнів потужності (PWM) (700W, 560W, 420W, 280W, 140W).
 * - Адаптивний PWM: Розрахунок циклу <30с або 30с на основі загального часу.
 * - Синхронізація ZVS: Увімкнення магнетрона синхронно з мережею (INT0).
 *
 * 8.  Базові Режими:
 * - Ручне встановлення часу (до 99:50) за принципом одометра.
 * - "Швидкий Старт": +30 сек (з затримкою 1с для багаторазових натискань).
 * - 2-етапне приготування.
 * - Авто-програми (AC-1..3, dEF-1..4).
 *
 * 9.  Сигнали та Годинник:
 * - Годинник 12/24-годинний формат.
 * - T-5 сек: Миготіння "End-" / Час (почергово кожні 0.75с).
 * - T-3 сек: Довгий сигнал (800мс) кожну секунду.
 * - T-0 сек: Стан "Finished" (30с), T+30с: Стан "Post-Cook" (до 2хв).
 *
 * 10. Безпека:
 * - Блокування від дітей: Утримання "Стоп" (3 сек).
 *
 * 11. Оптимізація (v1.7.1):
 * - Видалено функціонал STATE_ADC_DEBUG для економії Flash-пам'яті.
 * - Видалено невикористовувану змінну g_blink_counter.
 * - Замінено uint32_t на uint16_t в handle_time_input_odometer для економії Flash.
 */
